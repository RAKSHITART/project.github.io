<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mall Navigation System</title>
    <script>
        const INF = 1e9;
        const MAX_NODES = 100;

        let graph = Array.from({ length: MAX_NODES }, () => []);
        let shops = {};

        function addEdge(u, v, w) {
            graph[u].push({ destination: v, weight: w });
            graph[v].push({ destination: u, weight: w });
        }

        function dijkstra(source, n) {
            const dist = Array(n).fill(INF);
            const parent = Array(n).fill(-1);
            const visited = Array(n).fill(false);
            dist[source] = 0;

            for (let count = 0; count < n - 1; count++) {
                let u = -1;
                let minDist = INF;

                for (let i = 0; i < n; i++) {
                    if (!visited[i] && dist[i] < minDist) {
                        minDist = dist[i];
                        u = i;
                    }
                }

                if (u === -1) break;
                visited[u] = true;

                for (let edge of graph[u]) {
                    const { destination: v, weight } = edge;
                    if (!visited[v] && dist[u] + weight < dist[v]) {
                        dist[v] = dist[u] + weight;
                        parent[v] = u;
                    }
                }
            }

            return { dist, parent };
        }

        function getPath(parent, destination) {
            if (parent[destination] === -1) {
                return [destination];
            }
            const path = getPath(parent, parent[destination]);
            path.push(destination);
            return path;
        }

        function findShortestPath() {
            const n = parseInt(document.getElementById("numLocations").value);
            const startShop = document.getElementById("startShop").value.trim();
            const endShop = document.getElementById("endShop").value.trim();

            if (!(startShop in shops) || !(endShop in shops)) {
                alert("Invalid shop name(s) entered.");
                return;
            }

            const start = shops[startShop];
            const end = shops[endShop];

            const { dist, parent } = dijkstra(start, n);

            if (dist[end] === INF) {
                alert("No path exists between the shops.");
            } else {
                const path = getPath(parent, end).join(" -> ");
                const message = `Shortest path distance: ${dist[end]}\nPath: ${path}\nFor the customer: To go from ${startShop} to ${endShop}, take this path: ${path}`;
                alert(message);
            }
        }

        function addShop() {
            const shopName = document.getElementById("shopName").value.trim();
            const locationID = parseInt(document.getElementById("locationID").value);

            if (shopName && !isNaN(locationID)) {
                shops[shopName] = locationID;
                alert(`Shop "${shopName}" added at location ${locationID}.`);
                document.getElementById("shopName").value = "";
                document.getElementById("locationID").value = "";
            } else {
                alert("Invalid shop name or location ID.");
            }
        }

        function addPath() {
            const u = parseInt(document.getElementById("startNode").value);
            const v = parseInt(document.getElementById("endNode").value);
            const w = parseInt(document.getElementById("weight").value);

            if (!isNaN(u) && !isNaN(v) && !isNaN(w)) {
                addEdge(u, v, w);
                alert(`Path added between ${u} and ${v} with weight ${w}.`);
                document.getElementById("startNode").value = "";
                document.getElementById("endNode").value = "";
                document.getElementById("weight").value = "";
            } else {
                alert("Invalid path details.");
            }
        }
    </script>
</head>
<body>
    <h1>Mall Navigation System</h1>
    <div>
        <h3>Setup</h3>
        <label>Number of locations (nodes):</label>
        <input type="number" id="numLocations"><br><br>

        <h3>Add Shops</h3>
        <label>Shop Name:</label>
        <input type="text" id="shopName">
        <label>Location ID:</label>
        <input type="number" id="locationID">
        <button onclick="addShop()">Add Shop</button><br><br>

        <h3>Add Paths</h3>
        <label>Start Node:</label>
        <input type="number" id="startNode">
        <label>End Node:</label>
        <input type="number" id="endNode">
        <label>Weight:</label>
        <input type="number" id="weight">
        <button onclick="addPath()">Add Path</button><br><br>
    </div>

    <div>
        <h3>Find Shortest Path</h3>
        <label>Starting Shop Name:</label>
        <input type="text" id="startShop">
        <label>Destination Shop Name:</label>
        <input type="text" id="endShop">
        <button onclick="findShortestPath()">Find Path</button>
    </div>
</body>
</html>
